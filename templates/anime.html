<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Bear's Anime - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='animeStyle.css') }}">
</head>

<body>
  <!-- ===== NAVIGATION BAR ===== -->
  <header class="top-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="/anime">üß∏ Bear's Anime</a>
      </div>
      <nav class="nav-links">
        <a href="/">–î–æ–º</a>
        <a href="/anime">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–Ω–∏–º–µ</a>
        <a href="/author">–û–± –∞–≤—Ç–æ—Ä–µ</a>
      </nav>
    </div>
  </header>

  <!-- ===== MAIN LIBRARY ===== -->
  <main class="library">
    <h2>–ú–æ—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–Ω–∏–º–µ:</h2>

    <section class="anime anime-genre-list">
        {% for genre, titles in anime.items() %}
            <h3>{{ genre }} ‚òü</h3>
            <ul>
                {% for item in titles %}
                    <li>
                        <a href="{{ item[2] }}" target="_blank" class="anime-card fade-in">
                            <strong>{{ item[0] }}</strong><br>
                            <span class="anime-desc">{{ item[1] }}</span>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
    </section>
  </main>

  <!-- ===== FADE-IN SCRIPT ===== -->
  <script>
    function isInViewport(el) {
      const rect = el.getBoundingClientRect();
      return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.bottom >= 0
      );
    }

    const animeCards = document.querySelectorAll('.anime-card');

    function checkVisibility() {
      animeCards.forEach((card, index) => {
        if (isInViewport(card)) {
          setTimeout(() => card.classList.add('visible'), index * 100);
        }
      });
    }

    window.addEventListener('load', checkVisibility);
    window.addEventListener('scroll', checkVisibility);
  </script>
</body>
</html>
